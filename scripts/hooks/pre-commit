#!/usr/bin/env bash
set -e

just bin 2>/dev/null || true

STAGED=$(git diff --cached --name-only --diff-filter=ACM | grep '\.py$' || true)

if [ -z "$STAGED" ]; then
    exit 0
fi

uv run ruff format $STAGED
uv run ruff check --fix $STAGED
git add $STAGED
uv run pyright
